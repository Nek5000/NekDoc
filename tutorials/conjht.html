<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Conjugate Heat Transfer &mdash; Nek5000  documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Overlapping Overset Grids" href="neknek.html" />
    <link rel="prev" title="Periodic Hill" href="perhill.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Nek5000
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../problem_setup.html">Problem Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools.html">Nek Tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="fdlf.html">Fully Developed Laminar Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="perhill.html">Periodic Hill</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Conjugate Heat Transfer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pre-processing">Pre-processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mesh-generation">Mesh generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usr-file">usr file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#user-data">User Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#variable-properties">Variable properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#buoyancy-model">Buoyancy model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#initial-boundary-conditions">Initial &amp; boundary conditions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#control-parameters">Control parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#size-file">SIZE file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compilation">Compilation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#post-processing-the-results">Post-processing the results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="neknek.html">Overlapping Overset Grids</a></li>
<li class="toctree-l2"><a class="reference internal" href="rans.html">RANS Channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi_rans.html">Multi-Component RANS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../theory.html">Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build.html">Build Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Appendices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nek5000</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../tutorials.html">Tutorials</a> &raquo;</li>
      <li>Conjugate Heat Transfer</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorials/conjht.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="conjugate-heat-transfer">
<span id="conjht"></span><h1>Conjugate Heat Transfer<a class="headerlink" href="#conjugate-heat-transfer" title="Permalink to this headline">¶</a></h1>
<p>In this tutorial, we want to simulate a simple 2D Rayleigh-Benard convection (RBC) flow using <em>Nek5000’s</em> conjugate heat transfer capability.
The conjugate heat transfer capability solves the energy equation across both solid and liquid subdomains.
in the case of RBC, this provides a continuous temperature profile through horizontal walls of finite thickness.
The modeled case corresponds to a simplified version of simulations performed by Foroozhani et al. <a class="reference internal" href="../references.html#foroozani2021" id="id1">[Foroozani2021]</a>.</p>
<p>If you are not familiar with <em>Nek5000</em>, we strongly recommend that you begin with the <a class="reference internal" href="perhill.html#perhill"><span class="std std-ref">periodic hill</span></a> example first!
Similarly, we start by generating a 2D mesh, and modify the case files for this instance afterwards and finally run the case.</p>
<div class="section" id="pre-processing">
<h2>Pre-processing<a class="headerlink" href="#pre-processing" title="Permalink to this headline">¶</a></h2>
<p>Users must always bear in mind, when setting up a test case in <em>Nek5000</em>, case files will need to be edited.
Some samples can be found in the <code class="docutils literal notranslate"><span class="pre">Nek5000/examples</span></code> directory included with the release version.
Note that the <code class="docutils literal notranslate"><span class="pre">examples</span></code> directory is linked in the github repository as a submodule and can alternatively be obtained <a class="reference external" href="http://github.com/Nek5000/NekExamples">here</a>.
Blank template files for the user file, <code class="docutils literal notranslate"><span class="pre">zero.usr</span></code>, and the <code class="docutils literal notranslate"><span class="pre">SIZE</span></code> file, <code class="docutils literal notranslate"><span class="pre">SIZE.template</span></code>, can be found in the <code class="docutils literal notranslate"><span class="pre">Nek5000/core</span></code> directory.
As a first step, the user should create a case directory in the corresponding run directory:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> <span class="nv">$HOME</span>/Nek5000/run
<span class="gp">$</span> mkdir conj_ht
<span class="gp">$</span> <span class="nb">cd</span> conj_ht
</pre></div>
</div>
<p>and copy the template files into this directory.
Additionally, this tutorial requires the <code class="docutils literal notranslate"><span class="pre">ray0.rea</span></code> file from the Rayleigh-Bernard example found in <code class="docutils literal notranslate"><span class="pre">Nek5000/examples/rayleigh</span></code>.</p>
<p>We begin by creating the mesh with appropriate bounday conditions and then setting up the parameters and case files.</p>
</div>
<div class="section" id="mesh-generation">
<h2>Mesh generation<a class="headerlink" href="#mesh-generation" title="Permalink to this headline">¶</a></h2>
<p>This tutorial requires that you have the tools <code class="docutils literal notranslate"><span class="pre">genbox</span></code>, <code class="docutils literal notranslate"><span class="pre">genmap</span></code>, <code class="docutils literal notranslate"><span class="pre">reatore2</span></code> and <em>preNek</em> compiled.
Note that <em>preNek</em> requires the use of an xterminal.
Make sure the tools directory (typically <code class="docutils literal notranslate"><span class="pre">Nek5000/bin</span></code>) is in your environment PATH.
Before beginning, it is important to understand that there are two types of mesh topology: the “<em>v-mesh</em>” for the velocity and the “<em>t-mesh</em>” which can be used for the temperature and passive scalars.
The <em>v-mesh</em> (fluid subdomain) is always a subset of the <em>t-mesh</em> and the global element ID numbers of the <em>v-mesh</em> must preceed those of the <em>t-mesh</em>.
Therefore, we generate a <em>v-mesh</em> and <em>t-mesh</em> with appropriate BCs separately and later merge both subdomains using the conjugate heat transfer merge option in <em>preNek</em>.
This ensures the proper element ordering.</p>
<p>First, we create the mesh for the fluid part by creating the following input file in any text editor and running <code class="docutils literal notranslate"><span class="pre">genbox</span></code>.
Note that any line beginning with ‘#’ is a comment and is ignored by <code class="docutils literal notranslate"><span class="pre">genbox</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ray0.rea
2        spatial dimension
2        number of fields
#========================================================
#
#    Example of 2D  .box file for fluid. This gives 2 x 1
#    box with 20 x 10 elements
#
#    If nelx (y or z) &lt; 0, then genbox automatically generates the
#    grid spacing in the x (y or z) direction
#    with a geometric ratio given by &quot;ratio&quot;.
#    ( ratio=1 implies uniform spacing )
#
#========================================================
#
Box
-20     -10         nelx,nely,nelz for Box
0.0    2.0   1.0    x0 x1 ratio
0.0    1.0   1.0    y0 y1 ratio
W  ,W  ,W  ,W  ,    V bc&#39;s  ! NB:  3 characters each !
I  ,I  ,E  ,E  ,    T bc&#39;s  !      You must have 2 spaces!
</pre></div>
</div>
<p>In this example, the elements are distributed uniformly in the stream-wise (x) and span-wise (y) directions.
All surfaces of the fluid domain are assumed to be wall boundaries, as indicated by <code class="docutils literal notranslate"><span class="pre">'W</span>&#160; <span class="pre">'</span></code>.
The lateral surfaces of the inner domain and solid walls are assumed to be adiabatic, denoted by <code class="docutils literal notranslate"><span class="pre">'I</span>&#160; <span class="pre">'</span></code>.
The thermal boundary conditions for the upper and lower face should be <code class="docutils literal notranslate"><span class="pre">'E</span>&#160; <span class="pre">'</span></code>, which indicates that they are <em>interior boundaries</em>.
This condition is not mandatory, as any boundary condition set on these faces will be overwritten by <em>preNek</em> when the solid and fluid domains are merged with <em>preNek</em>.
However, it is <strong>HIGHLY RECOMMENDED</strong> to assign any expected interior faces as <code class="docutils literal notranslate"><span class="pre">'E</span>&#160; <span class="pre">'</span></code>, as any unjoined interior boundaries will be caught later by <em>preNek</em>.
This is useful for identifying inconsistencies in mesh generation.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">genbox</span></code> is run, the tool will produce a file named <code class="docutils literal notranslate"><span class="pre">box.rea</span></code> containing mesh, boundary condition, and simulation parameter information, which should be renamed to <code class="docutils literal notranslate"><span class="pre">fluid.rea</span></code>.</p>
<p>In the next step, we create the upper and lower solid parts of finite thickness h=0.2.
The lower domain spans <span class="math notranslate nohighlight">\(y \in [-0.2,0]\)</span> and the upper domain spans <span class="math notranslate nohighlight">\(y \in [1,1.2]\)</span>.</p>
<p><strong>Note:</strong> It is important to keep the <em>number of elements equal in the spanwise direction</em> for different parts.
This is to ensure that all the subdomains are conformal on their interfaces.</p>
<p>Both domains can be generated simultaneously by <code class="docutils literal notranslate"><span class="pre">genbox</span></code> with the following input file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ray0.rea
2        spatial dimension
2        number of fields
#========================================================
#
#    This gives a 2 x 1 box with 20 x 5 elements
#    here used for Rayleigh Benard convection.
#
#    Note that spatial dimension &gt; 0 implies that box.rea
#    will be ascii, requiring the ray0.rea template.
#
#========================================================
#
Box
-20    -5           nelx,nely,nelz for Box
0.0    2.0   1.0    x0 x1 ratio
-0.2   0.0   1.0    y0 y1 ratio
   ,   ,   ,   ,    V bc&#39;s  ! NB:  3 characters each, in order: -x, +x, -y, +y, (-z, +z)!
I  ,I  ,t  ,E  ,    T bc&#39;s  !      You must have 2 spaces!!
Box
-20    -5           nelx,nely,nelz for Box
0.0    2.0   1.0    x0 x1 ratio
1.0    1.2   1.0    y0 y1 ratio
   ,   ,   ,   ,    V bc&#39;s  ! NB:  3 characters each, in order: left, right, bottom, top
I  ,I  ,E  ,t  ,    T bc&#39;s  !      You must have 2 spaces!!
</pre></div>
</div>
<p>There are a few things worth notice here.
First, no boundary conditions were given for the velocity.
As the generated mesh corresponds only to the solid domain, any provided BCs will be ignored by <em>Nek5000</em> at runtime and these are left as blank, <code class="docutils literal notranslate"><span class="pre">'</span>&#160;&#160; <span class="pre">'</span></code>, to indicate that the velocity is not defined on the solid mesh.
Second, Dirichlet boundaries, <code class="docutils literal notranslate"><span class="pre">'t</span>&#160; <span class="pre">'</span></code>, are prescribed for the temperature.
These will indicate which faces the <code class="docutils literal notranslate"><span class="pre">userbc</span></code> subroutine is called.
Finally, <code class="docutils literal notranslate"><span class="pre">genbox</span></code> does not perform any consistency checks, so even though the two domains are not connected, it will still produce a mesh file.
The tool will again produce a file named <code class="docutils literal notranslate"><span class="pre">box.rea</span></code> which should be renamed to <code class="docutils literal notranslate"><span class="pre">solid.rea</span></code>.</p>
<p>Then, we can run <em>preNek</em> to merge the fluid and solid subdomains.
<em>preNek</em> can be invoked with either the GUI or text-based interface via the commands <code class="docutils literal notranslate"><span class="pre">prex</span></code> and <code class="docutils literal notranslate"><span class="pre">pretex</span></code> respectively.
While the GUI has more functionality, the text-based interface is useful for scripting.
Note that the GUI is displayed in either case, requiring an X-window.
The only difference is in how commands are input into <em>preNek</em>.
For this case the text-based interface will be used.</p>
<p>It is important to first enter the fluid domain file name and then the solid part.
An example of running <code class="docutils literal notranslate"><span class="pre">pretex</span></code> is shown below, with the expected user input highlighted.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><span class="hll">$ pretex
</span>-*-*-*-*-*--*-*-*-*-*-*-*-*
 NEKTON Version   2.6
...
 Choose a Name for This Session:
<span class="hll">combined
</span>  Beginning Session combined
   1 READ PREVIOUS PARAMETERS
   2 TYPE IN  NEW  PARAMETERS
   3 CONJ. HEAT TRANSFER MERGE
Choose item:
<span class="hll">3
</span>           3
 Enter name of fluid session
<span class="hll">fluid
</span> Will Read Mesh and B.C. data from  fluid.rea
     Reading Element       4   [    1d]
...
     Reading Element     200   [    1R]
 drwobjs:            0
Showing only nelcap elements of          200
 Enter name of the solid session
<span class="hll">solid
</span> Found           0  curve sides.
  ***** FLUID   BOUNDARY CONDITIONS *****
...
Curve side consistency check OK.
 bound A: ACCEPT B.C.&#39;s                        0           1
Curve side consistency check OK.
 bound A: ACCEPT B.C.&#39;s                        0           1
         400  this is nel in prexit
Writing Parameters to file
Deleting tmp.* files.
  Exiting session    0.00000000
</pre></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">.rea</span></code> suffix is assumed when specifying files to <em>preNek</em>.
If all goes well, this will produce the <code class="docutils literal notranslate"><span class="pre">combined.rea</span></code> file.
<em>preNek</em> will check for boundary condition consistency before exiting.
If it asks to assign any BCs, something is inconsistent with the box files.</p>
<p>Now, the user needs to run the <code class="docutils literal notranslate"><span class="pre">reatore2</span></code> and <code class="docutils literal notranslate"><span class="pre">genmap</span></code> tools in order to produce the <code class="docutils literal notranslate"><span class="pre">cht2d.re2</span></code> and <code class="docutils literal notranslate"><span class="pre">cht2d.ma2</span></code> binary files respectively.
An example of running <code class="docutils literal notranslate"><span class="pre">reatore2</span></code> is shown, again with expected user input highlighted.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  Input .rea name
<span class="hll"> combined
</span>  Input .rea/.re2 output name:
<span class="hll"> cht2d
</span>
 Start converting...

 read:   *** MESH DATA ***
          400          200 2 nelt/nelv/ndim
 read:   ***** CURVED SIDE DATA *****
 read:   ***** BOUNDARY CONDITIONS *****
 read:   ***** FLUID   BOUNDARY CONDITIONS *****
            1          60  Number of bcs
 read:   ***** THERMAL BOUNDARY CONDITIONS *****
            2          80  Number of bcs
  done
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">reatore2</span></code> will produce both a binary mesh file, <code class="docutils literal notranslate"><span class="pre">cht2d.re2</span></code>, and a new rea file, <code class="docutils literal notranslate"><span class="pre">cht2d.rea</span></code>.
The options in the rea file are propagated from the original template, <code class="docutils literal notranslate"><span class="pre">ray0.rea</span></code>, and will override the options we will later set in the par file, so it is recommend to either rename or delete the new rea file.
The produced mesh is shown in <a class="reference internal" href="#fig-cht-mesh"><span class="std std-numref">Fig. 18</span></a>.</p>
<div class="align-center figure" id="id3">
<span id="fig-cht-mesh"></span><img alt="per_mesh" src="../_images/mesh.png" />
<p class="caption"><span class="caption-number">Fig. 18 </span><span class="caption-text">Combined box mesh</span></p>
</div>
</div>
<div class="section" id="usr-file">
<h2>usr file<a class="headerlink" href="#usr-file" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../problem_setup/usr_file.html#case-files-usr"><span class="std std-ref">user routines</span></a> file implements various subroutines to allow the users to interact with the solver.</p>
<p>To get started we copy the template to our case directory and then we modify its subroutines accordingly.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cp <span class="nv">$HOME</span>/Nek5000/core/zero.usr cht2d.usr
</pre></div>
</div>
<div class="section" id="user-data">
<h3>User Data<a class="headerlink" href="#user-data" title="Permalink to this headline">¶</a></h3>
<p><em>Nek5000</em> provides multiple subroutines useful for providing user data.
These are <code class="docutils literal notranslate"><span class="pre">usrdat</span></code>, <code class="docutils literal notranslate"><span class="pre">usrdat2</span></code>, and <code class="docutils literal notranslate"><span class="pre">usrdat3</span></code> which are all called once at the begining of a run and appear towards the bottom of the template user file.
They are called at different times during initialization and the different use cases for each one can be significant, but for the purposes of this tutorial we focus only on basic input done in <code class="docutils literal notranslate"><span class="pre">usrdat</span></code>.
By specifying the needed user parameters in <code class="docutils literal notranslate"><span class="pre">usrdat</span></code> and providing them in a common block, those parameters can easily be made available to any user subroutine.
The relevant lines describing the common block are highlighted for emphasis.
Note that they will appear in most of the modified subroutines.</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span>      <span class="k">subroutine </span><span class="n">usrdat</span><span class="p">()</span>   <span class="c">! This routine to modify element vertices</span>
      <span class="k">implicit none</span>
<span class="k">      include</span> <span class="s1">&#39;SIZE&#39;</span>
      <span class="k">include</span> <span class="s1">&#39;TOTAL&#39;</span>

<span class="hll">      <span class="kt">real </span><span class="n">deltaT</span><span class="p">,</span><span class="n">hs</span><span class="p">,</span><span class="n">lambda</span>
</span><span class="hll">      <span class="k">common</span> <span class="o">/</span><span class="n">myparams</span><span class="o">/</span> <span class="n">deltaT</span><span class="p">,</span><span class="n">hs</span><span class="p">,</span><span class="n">lambda</span>
</span>
      <span class="n">deltaT</span> <span class="o">=</span> <span class="mf">2.5</span>  <span class="c">!temperature change across solid domain</span>
      <span class="n">hs</span> <span class="o">=</span> <span class="mf">0.2</span>      <span class="c">!thickness of solid domain</span>
      <span class="n">lambda</span> <span class="o">=</span> <span class="mi">1</span><span class="mf">0.0</span> <span class="c">!ratio of solid to fluid conductivity</span>

      <span class="k">return</span>
<span class="k">      end</span>
</pre></div>
</div>
</div>
<div class="section" id="variable-properties">
<h3>Variable properties<a class="headerlink" href="#variable-properties" title="Permalink to this headline">¶</a></h3>
<p>In the <a class="reference internal" href="../problem_setup/usr_file.html#sec-uservp"><span class="std std-ref">uservp subroutine</span></a>, users can specifiy different variable properties for the fluid and solid subdomains independently.
As an example, the thermal diffusivity of Copper is <span class="math notranslate nohighlight">\(\alpha = 1.1 (10 ^ {-4})\)</span> [<span class="math notranslate nohighlight">\(m^{2}/s\)</span>].
The thermal diffusivity ratio of Copper and liquid metal alloy GaInSn (Pr = 0.033) is 10 and the thermal diffusivity ratio of Copper and air (Pr = 0.7) is 5.2 <a class="reference internal" href="../references.html#foroozani2021" id="id2">[Foroozani2021]</a>.
The conductivity of the solid region is set by comparing the global element number, <code class="docutils literal notranslate"><span class="pre">eg</span></code>, to the the total number of elements in the <em>v-mesh</em>, <code class="docutils literal notranslate"><span class="pre">nelgv</span></code>.
The highlighted line indicates where this is done:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span>      <span class="k">subroutine </span><span class="n">uservp</span><span class="p">(</span><span class="n">ix</span><span class="p">,</span><span class="n">iy</span><span class="p">,</span><span class="n">iz</span><span class="p">,</span><span class="n">eg</span><span class="p">)</span> <span class="c">! set variable properties</span>
      <span class="k">implicit none</span>
<span class="k">      include</span> <span class="s1">&#39;SIZE&#39;</span>
      <span class="k">include</span> <span class="s1">&#39;TOTAL&#39;</span>
      <span class="k">include</span> <span class="s1">&#39;NEKUSE&#39;</span>

      <span class="kt">integer </span><span class="n">ix</span><span class="p">,</span><span class="n">iy</span><span class="p">,</span><span class="n">iz</span><span class="p">,</span><span class="n">eg</span><span class="p">,</span><span class="n">e</span>
      <span class="kt">real </span><span class="n">deltaT</span><span class="p">,</span><span class="n">hs</span><span class="p">,</span><span class="n">lambda</span>
      <span class="k">common</span> <span class="o">/</span><span class="n">myparams</span><span class="o">/</span> <span class="n">deltaT</span><span class="p">,</span><span class="n">hs</span><span class="p">,</span><span class="n">lambda</span>

<span class="c">!     e = gllel(eg)</span>

      <span class="n">udiff</span>  <span class="o">=</span> <span class="n">cpfld</span><span class="p">(</span><span class="n">ifield</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
      <span class="n">utrans</span> <span class="o">=</span> <span class="n">cpfld</span><span class="p">(</span><span class="n">ifield</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="hll">      <span class="k">if</span><span class="p">(</span><span class="n">eg</span><span class="p">.</span><span class="n">gt</span><span class="p">.</span><span class="n">nelgv</span><span class="p">)</span> <span class="n">udiff</span><span class="o">=</span><span class="n">lambda</span><span class="o">*</span><span class="n">cpfld</span><span class="p">(</span><span class="n">ifield</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
</span>
      <span class="k">return</span>
<span class="k">      end</span>
</pre></div>
</div>
<p>Note that the properties only vary between the fluid and the solid subdomains.
Properties within the fluid and solid respectively remain constant as provided by <a class="reference internal" href="../problem_setup/usr_file.html#tab-cpfld"><span class="std std-ref">the field coefficient array</span></a> (<code class="docutils literal notranslate"><span class="pre">cpfld</span></code>).</p>
</div>
<div class="section" id="buoyancy-model">
<h3>Buoyancy model<a class="headerlink" href="#buoyancy-model" title="Permalink to this headline">¶</a></h3>
<p>To account for buoyancy, the Buossinesq approximation is used.
Rather than explicitly including a variable density, a body force of the form <span class="math notranslate nohighlight">\(F = \rho g \beta (T-T_{ref})\)</span> is included.
Due to the choice of non-dimensionalization, this is implemented here simply as <span class="math notranslate nohighlight">\(F = T\)</span>.
A body force is added to <em>Nek5000</em> in the <code class="docutils literal notranslate"><span class="pre">userf</span></code> subroutine, which is seen below.
The highlighted line indicates where the buoyancy force is added in the <em>y</em>-direction.</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span>      <span class="k">subroutine </span><span class="n">userf</span><span class="p">(</span><span class="n">ix</span><span class="p">,</span><span class="n">iy</span><span class="p">,</span><span class="n">iz</span><span class="p">,</span><span class="n">eg</span><span class="p">)</span> <span class="c">! set acceleration term</span>
<span class="c">!</span>
<span class="c">!     Note: this is an acceleration term, NOT a force!</span>
<span class="c">!     Thus, ffx will subsequently be multiplied by rho(x,t).</span>
<span class="c">!</span>
      <span class="k">implicit none</span>
<span class="k">      include</span> <span class="s1">&#39;SIZE&#39;</span>
      <span class="k">include</span> <span class="s1">&#39;TOTAL&#39;</span>
      <span class="k">include</span> <span class="s1">&#39;NEKUSE&#39;</span>

      <span class="kt">integer </span><span class="n">ix</span><span class="p">,</span><span class="n">iy</span><span class="p">,</span><span class="n">iz</span><span class="p">,</span><span class="n">eg</span><span class="p">,</span><span class="n">e</span>
<span class="c">!     e = gllel(eg)</span>

      <span class="n">ffx</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="hll">      <span class="n">ffy</span> <span class="o">=</span> <span class="n">temp</span>
</span>      <span class="n">ffz</span> <span class="o">=</span> <span class="mf">0.0</span>

      <span class="k">return</span>
<span class="k">      end</span>
</pre></div>
</div>
</div>
<div class="section" id="initial-boundary-conditions">
<h3>Initial &amp; boundary conditions<a class="headerlink" href="#initial-boundary-conditions" title="Permalink to this headline">¶</a></h3>
<p>The next step is to specify the initial and boundary conditions.
We apply a linear variation of temperature in the fluid mesh in the <em>y</em>-direction where the lower surface of the lower plate is maintained at a high temperature, and the upper surface of the upper plate is maintained at a low temperature.</p>
<p>In this RBC example <span class="math notranslate nohighlight">\(Ra = 10 ^ {7}\)</span> and <span class="math notranslate nohighlight">\(Pr= 0.033\)</span> are choosen.
The equilibrium state of pure conductive heat transfer as the initial condition takes the form <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">=</span> <span class="pre">1</span> <span class="pre">-</span> <span class="pre">y</span></code> for  <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;</span> <span class="pre">y</span> <span class="pre">&lt;</span> <span class="pre">1</span></code>  in the fluid domain and <span class="math notranslate nohighlight">\(T \approx 1\)</span> and <span class="math notranslate nohighlight">\(\approx 0\)</span> at the fluid-solid boundaries.
It should be mentioned that the temperature drop across both solid-plates varies with <em>Pr</em> and <em>Ra</em> and it should be adjusted at the boundaries with temperature increment <span class="math notranslate nohighlight">\(\delta T\)</span>.
One can apply a temperature increment of <span class="math notranslate nohighlight">\(\delta T = 2.5\)</span> at the top of the upper plate and the bottom of the lower plate for <span class="math notranslate nohighlight">\(Pr = 0.033\)</span> and <span class="math notranslate nohighlight">\(\delta T = 4.72\)</span> for <span class="math notranslate nohighlight">\(Pr = 0.7\)</span> as depicted in <a class="reference internal" href="#fig-deltat2"><span class="std std-numref">Fig. 19</span></a>.
Subsequently, we modify <code class="docutils literal notranslate"><span class="pre">userbc</span></code> and <code class="docutils literal notranslate"><span class="pre">useric</span></code> as:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span>      <span class="k">subroutine </span><span class="n">userbc</span><span class="p">(</span><span class="n">ix</span><span class="p">,</span><span class="n">iy</span><span class="p">,</span><span class="n">iz</span><span class="p">,</span><span class="n">iside</span><span class="p">,</span><span class="n">eg</span><span class="p">)</span> <span class="c">! set up boundary conditions</span>
<span class="c">!</span>
<span class="c">!     NOTE ::: This subroutine MAY NOT be called by every process</span>
<span class="c">!</span>
      <span class="k">implicit none</span>
<span class="k">      include</span> <span class="s1">&#39;SIZE&#39;</span>
      <span class="k">include</span> <span class="s1">&#39;TOTAL&#39;</span>
      <span class="k">include</span> <span class="s1">&#39;NEKUSE&#39;</span>

      <span class="kt">integer </span><span class="n">ix</span><span class="p">,</span><span class="n">iy</span><span class="p">,</span><span class="n">iz</span><span class="p">,</span><span class="n">iside</span><span class="p">,</span><span class="n">eg</span>
      <span class="kt">real </span><span class="n">deltaT</span><span class="p">,</span><span class="n">hs</span><span class="p">,</span><span class="n">lambda</span>
      <span class="k">common</span> <span class="o">/</span><span class="n">myparams</span><span class="o">/</span> <span class="n">deltaT</span><span class="p">,</span><span class="n">hs</span><span class="p">,</span><span class="n">lambda</span>

<span class="c">!      if (cbc(iside,gllel(eg),ifield).eq.&#39;v01&#39;)</span>

      <span class="n">ux</span>   <span class="o">=</span> <span class="mf">0.0</span>
      <span class="n">uy</span>   <span class="o">=</span> <span class="mf">0.0</span>
      <span class="n">uz</span>   <span class="o">=</span> <span class="mf">0.0</span>
      <span class="n">temp</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="hll">      <span class="k">if</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">gt</span><span class="p">.</span><span class="mf">1.0</span><span class="p">)</span> <span class="n">temp</span> <span class="o">=-</span><span class="n">deltaT</span> <span class="c">!top plate</span>
</span><span class="hll">      <span class="k">if</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">lt</span><span class="p">.</span><span class="mf">0.0</span><span class="p">)</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">deltaT</span> <span class="c">!bottom plate</span>
</span>
      <span class="k">return</span>
<span class="k">      end</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span>      <span class="k">subroutine </span><span class="n">useric</span><span class="p">(</span><span class="n">ix</span><span class="p">,</span><span class="n">iy</span><span class="p">,</span><span class="n">iz</span><span class="p">,</span><span class="n">eg</span><span class="p">)</span> <span class="c">! set up initial conditions</span>
      <span class="k">implicit none</span>
<span class="k">      include</span> <span class="s1">&#39;SIZE&#39;</span>
      <span class="k">include</span> <span class="s1">&#39;TOTAL&#39;</span>
      <span class="k">include</span> <span class="s1">&#39;NEKUSE&#39;</span>

      <span class="kt">integer </span><span class="n">ix</span><span class="p">,</span><span class="n">iy</span><span class="p">,</span><span class="n">iz</span><span class="p">,</span><span class="n">eg</span>
      <span class="kt">real </span><span class="n">deltaT</span><span class="p">,</span><span class="n">hs</span><span class="p">,</span><span class="n">lambda</span>
      <span class="k">common</span> <span class="o">/</span><span class="n">myparams</span><span class="o">/</span> <span class="n">deltaT</span><span class="p">,</span><span class="n">hs</span><span class="p">,</span><span class="n">lambda</span>

      <span class="n">ux</span>   <span class="o">=</span> <span class="mf">0.0</span>
      <span class="n">uy</span>   <span class="o">=</span> <span class="mf">0.0</span>
      <span class="n">uz</span>   <span class="o">=</span> <span class="mf">0.0</span>
<span class="hll">      <span class="n">temp</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">y</span> <span class="c">!fluid temperature</span>
</span>
      <span class="k">if</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">ge</span><span class="p">.</span><span class="mf">1.0</span><span class="p">)</span> <span class="k">then</span>
<span class="hll"><span class="k">        </span><span class="n">temp</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="p">(</span> <span class="n">y</span> <span class="o">/</span> <span class="n">hs</span> <span class="p">)</span> <span class="o">*</span> <span class="n">deltaT</span> <span class="c">!top plate</span>
</span>      <span class="n">elseif</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">le</span><span class="p">.</span><span class="mf">0.0</span><span class="p">)</span> <span class="k">then</span>
<span class="hll"><span class="k">        </span><span class="n">temp</span> <span class="o">=</span> <span class="p">(</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">y</span> <span class="p">)</span> <span class="o">/</span> <span class="n">hs</span> <span class="o">*</span> <span class="n">deltaT</span> <span class="c">!bottom plate</span>
</span>      <span class="n">endif</span>

      <span class="k">return</span>
<span class="k">      end</span>
</pre></div>
</div>
<div class="align-center figure" id="id4">
<span id="fig-deltat2"></span><img alt="per_flow" src="../_images/deltaT2.png" />
<p class="caption"><span class="caption-number">Fig. 19 </span><span class="caption-text">Mean dimensionless temperature profiles in the CHT setting. Temprerature variation in solid-fluid domain is shown here.</span></p>
</div>
</div>
</div>
<div class="section" id="control-parameters">
<h2>Control parameters<a class="headerlink" href="#control-parameters" title="Permalink to this headline">¶</a></h2>
<p>The control parameters for any case are given in the <code class="docutils literal notranslate"><span class="pre">.par</span></code> file.
For this case, using any text editor, create a new file called <code class="docutils literal notranslate"><span class="pre">cht2d.par</span></code> and type in the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Nek5000 parameter file</span>
<span class="p">[</span><span class="n">GENERAL</span><span class="p">]</span>
<span class="n">stopAt</span> <span class="o">=</span> <span class="n">endTime</span>
<span class="n">endTime</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">dt</span> <span class="o">=</span> <span class="mf">5.0e-1</span>
<span class="n">variabledt</span> <span class="o">=</span> <span class="n">yes</span>
<span class="n">targetCFL</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">writeControl</span> <span class="o">=</span> <span class="n">runTime</span>
<span class="n">writeInterval</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="p">[</span><span class="n">VELOCITY</span><span class="p">]</span>
<span class="n">density</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="c1"># viscosity = sqrt(1/Ra)</span>
<span class="n">viscosity</span> <span class="o">=</span> <span class="mf">5.744563e-5</span>

<span class="p">[</span><span class="n">TEMPERATURE</span><span class="p">]</span>
<span class="n">conjugateHeatTransfer</span> <span class="o">=</span> <span class="n">yes</span>
<span class="n">rhoCp</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="c1"># conductivity = sqrt(Ra * Pr)</span>
<span class="n">conductivity</span> <span class="o">=</span> <span class="mf">1.740776e-3</span>
</pre></div>
</div>
<p>Note that if the file <code class="docutils literal notranslate"><span class="pre">cht2d.rea</span></code> exists within the case directory, <em>Nek5000</em> will preferentially read the case parameters from that file instead, which may result in errors or inconsistent results.
In this example, we have set the calculation to stop after a physical time of 50 (<code class="docutils literal notranslate"><span class="pre">endTime</span> <span class="pre">=</span> <span class="pre">50.0</span></code>) and write the checkpoint file every 1 physical time units (<code class="docutils literal notranslate"><span class="pre">writeInterval</span> <span class="pre">=</span> <span class="pre">1.0</span></code>).
This will provide 50 snapshots of the developing velocity and temperature fields.
In choosing <code class="docutils literal notranslate"><span class="pre">viscosity</span> <span class="pre">=</span> <span class="pre">5.744563E-05</span></code> and <code class="docutils literal notranslate"><span class="pre">conductivity</span> <span class="pre">=</span> <span class="pre">1.740776E-03</span></code>, actually we are setting the Rayleigh <em>Ra=10e7</em> and <em>Pr=0.033</em>.
By omitting the <code class="docutils literal notranslate"><span class="pre">[PRESSURE]</span></code> and <code class="docutils literal notranslate"><span class="pre">[PROBLEMTYPE]</span></code> categories, we are telling the solver to use default values for the necessary parameters.
Additional details on available settings in the par file are available <a class="reference internal" href="../problem_setup/case_files.html#case-files-par"><span class="std std-ref">here</span></a>.</p>
</div>
<div class="section" id="size-file">
<h2>SIZE file<a class="headerlink" href="#size-file" title="Permalink to this headline">¶</a></h2>
<p>The static memory layout of <em>Nek5000</em> requires the user to set some solver parameters through a so called <code class="docutils literal notranslate"><span class="pre">SIZE</span></code> file.
Typically it’s a good idea to start from the template.
If you haven’t already, copy the <code class="docutils literal notranslate"><span class="pre">SIZE.template</span></code> file from the core directory and rename it <code class="docutils literal notranslate"><span class="pre">SIZE</span></code> in the working directory:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cp <span class="nv">$HOME</span>/Nek5000/core/SIZE.template SIZE
</pre></div>
</div>
<p>Then, adjust the following parameters in the BASIC section.
The only one you will likely need to change is the number of global elements on the highlighted line.</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span>      <span class="c">! BASIC</span>
      <span class="k">parameter</span> <span class="p">(</span><span class="n">ldim</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>               <span class="c">! domain dimension (2 or 3)</span>
      <span class="k">parameter</span> <span class="p">(</span><span class="n">lx1</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>                <span class="c">! GLL points per element along each direction</span>
      <span class="k">parameter</span> <span class="p">(</span><span class="n">lxd</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>               <span class="c">! GL  points for over-integration (dealiasing) </span>
      <span class="k">parameter</span> <span class="p">(</span><span class="n">lx2</span><span class="o">=</span><span class="n">lx1</span><span class="o">-</span><span class="mi">0</span><span class="p">)</span>            <span class="c">! GLL points for pressure (lx1 or lx1-2)</span>
                                     
<span class="hll">      <span class="k">parameter</span> <span class="p">(</span><span class="n">lelg</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>             <span class="c">! max number of global elements</span>
</span>      <span class="k">parameter</span> <span class="p">(</span><span class="n">lpmin</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>              <span class="c">! min number of MPI ranks </span>
      <span class="k">parameter</span> <span class="p">(</span><span class="n">lelt</span><span class="o">=</span><span class="n">lelg</span><span class="o">/</span><span class="n">lpmin</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span>  <span class="c">! max number of local elements per MPI rank</span>
      <span class="k">parameter</span> <span class="p">(</span><span class="n">ldimt</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>              <span class="c">! max auxiliary fields (temperature + scalars)</span>
</pre></div>
</div>
<p>For this tutorial we have set our polynomial order to be <span class="math notranslate nohighlight">\(N=7\)</span> - this is defined in the <code class="docutils literal notranslate"><span class="pre">SIZE</span></code> file above as <code class="docutils literal notranslate"><span class="pre">lx1=8</span></code> which indices that there are 8 points in each spatial dimension of every element.
Additional details on the parameters in the <code class="docutils literal notranslate"><span class="pre">SIZE</span></code> file are given <a class="reference internal" href="../problem_setup/case_files.html#case-files-size"><span class="std std-ref">here</span></a>.</p>
</div>
<div class="section" id="compilation">
<h2>Compilation<a class="headerlink" href="#compilation" title="Permalink to this headline">¶</a></h2>
<p>You should now be all set to compile and run your case!
As a final check, you should have the following files:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference download internal" download="" href="../_downloads/773d95526f7b9bd9bdc250951e692d1f/cht2d.usr"><code class="xref download docutils literal notranslate"><span class="pre">cht2d.usr</span></code></a></li>
<li><a class="reference download internal" download="" href="../_downloads/914e369a0337bfef572e129ff37ba38d/cht2d.par"><code class="xref download docutils literal notranslate"><span class="pre">cht2d.par</span></code></a></li>
<li><a class="reference download internal" download="" href="../_downloads/8a8aa5fb4111aa5bc7100a8e5b69e455/cht2d.re2"><code class="xref download docutils literal notranslate"><span class="pre">cht2d.re2</span></code></a></li>
<li><a class="reference download internal" download="" href="../_downloads/8f73d6e00119fe7c9e9215080d28da0d/cht2d.ma2"><code class="xref download docutils literal notranslate"><span class="pre">cht2d.ma2</span></code></a></li>
<li><a class="reference download internal" download="" href="../_downloads/ef121159f9c0f12896b75e1676fab000/SIZE"><code class="xref download docutils literal notranslate"><span class="pre">SIZE</span></code></a></li>
</ul>
</div></blockquote>
<p>If for some reason you encountered an insurmountable error and were unable to generate any of the required files, you may use the provided links to download them.
After confirming that you have all five, you are now ready to compile</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> makenek cht2d
</pre></div>
</div>
<p>If all works properly, upon compilation the executable <code class="docutils literal notranslate"><span class="pre">nek5000</span></code> will be generated and you will see something like:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#############################################################
#                  Compilation successful!                  #
#############################################################
   text	   data	    bss	    dec	    hex	filename
1774311	  16940	141305600	143096851	8877c13	nek5000
</pre></div>
</div>
<p>Note that compilation only relies on the user file and the SIZE file.
Any changes to these two files will require recompiling your case!
Now you are all set, just run</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> nekbmpi cht2d <span class="m">4</span>
</pre></div>
</div>
<p>to launch an MPI jobs on your local machine using 4 ranks. The output will be redirected to <code class="docutils literal notranslate"><span class="pre">logfile</span></code>.</p>
</div>
<div class="section" id="post-processing-the-results">
<h2>Post-processing the results<a class="headerlink" href="#post-processing-the-results" title="Permalink to this headline">¶</a></h2>
<p>Once execution is completed your directory should now contain multiple checkpoint files that look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cht2d</span><span class="o">.</span><span class="n">f00001</span>
<span class="n">cht2d</span><span class="o">.</span><span class="n">f00002</span>
<span class="o">...</span>
</pre></div>
</div>
<p>The preferred mode for data visualization with <em>Nek5000</em> is to use Visit or Paraview.
This requires generating a metadata file with <code class="docutils literal notranslate"><span class="pre">visnek</span></code>, found in <code class="docutils literal notranslate"><span class="pre">/scripts</span></code>.
It can be run with</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> visnek cht2d
</pre></div>
</div>
<p>to obtain a file named <code class="docutils literal notranslate"><span class="pre">cht2d.nek5000</span></code>.
This file can be opened with either Visit or Paraview.</p>
<p>In the viewing window, the temperature-field can be visualized.
It will be similar to, but not necessarily identical to that shown in <a class="reference internal" href="#fig-cht-rbc"><span class="std std-numref">Fig. 20</span></a>.</p>
<div class="align-center figure" id="id5">
<span id="fig-cht-rbc"></span><img alt="per_flow" src="../_images/cht_rbc.png" />
<p class="caption"><span class="caption-number">Fig. 20 </span><span class="caption-text">Steady-State flow field visualized in Visit. Vectors represent velocity. Colors represent temperature.</span></p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="perhill.html" class="btn btn-neutral float-left" title="Periodic Hill" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="neknek.html" class="btn btn-neutral float-right" title="Overlapping Overset Grids" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2023, UCHICAGO ARGONNE, LLC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>