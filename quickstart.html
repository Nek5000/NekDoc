

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Quickstart &mdash; Nek5000  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="FAQ" href="faq.html" />
    <link rel="prev" title="Nek5000" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Nek5000
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#before-you-begin">Before You Begin…</a></li>
<li class="toctree-l2"><a class="reference internal" href="#directory-structure">Directory structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#case-files">Case files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scripts">Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-your-very-first-simulation">Running your very first simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#meshing">Meshing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualization">Visualization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="problem_setup.html">Problem Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Build Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendices</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Nek5000</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Quickstart</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quickstart">
<span id="qstart"></span><h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<div class="section" id="before-you-begin">
<h2>Before You Begin…<a class="headerlink" href="#before-you-begin" title="Permalink to this headline">¶</a></h2>
<p>It is recommended that the user have basic familiarity with Linux or another Unix-based OS.
The instructions provided in the quickstart guide and the tutorials use basic bash commands and assume the user has this knowledge.
At an absolute minimum, to successfully build and run <em>Nek5000</em> will require compatible C and Fortran compilers, such as <code class="docutils literal notranslate"><span class="pre">gcc</span></code> and <code class="docutils literal notranslate"><span class="pre">gfortran</span></code>, and <em>GNU Make</em>.
To successfully build and run <em>Nek5000</em> in parallel will additionally require a compatible MPI wrapper, such as <em>OpenMPI</em> or <em>MPICH</em>.
Some of the tools and advanced features will have additional dependencies, such as <em>CMake</em>.</p>
</div>
<div class="section" id="directory-structure">
<h2>Directory structure<a class="headerlink" href="#directory-structure" title="Permalink to this headline">¶</a></h2>
<p>Here’s a brief description of each top-level directory:</p>
<div class="topic">
<p class="topic-title">/core</p>
<p>Contains the Nek5000 application sources.</p>
</div>
<div class="topic">
<p class="topic-title">/bin</p>
<p>Contains scripts for running nek5000 and manipulating its output, and binaries for the tools. This directory should be added to your environment <a class="reference external" href="https://opensource.com/article/17/6/set-path-linux">PATH</a>.</p>
</div>
<div class="topic">
<p class="topic-title">/tools</p>
<p>Contains the sources for the pre- and post-processing tools which are stand-alone.</p>
</div>
<div class="topic">
<p class="topic-title">/short-tests</p>
<p>Contains light-weight regression tests for verification.</p>
</div>
<div class="topic">
<p class="topic-title">/run</p>
<p>A place for users to keep their problem cases. Note that many HPC systems recommend keeping source code and output on separate file systems, in which case this directory should not be used. Consult your system administrator for best practices.</p>
</div>
<div class="topic">
<p class="topic-title">/examples</p>
<p>Contains example problems. Note that this directory is NOT included in the master branch on the GitHub repo. The <em>NekExamples</em> repository can be found <a class="reference external" href="https://github.com/Nek5000/NekExamples">here</a>.</p>
</div>
<div class="topic">
<p class="topic-title">/3rd_party</p>
<p>Contains third party software not part of the <em>Nek5000</em> core, e.g. <em>gslib</em>, <em>HYPRE</em>, and <em>CVODE</em>.</p>
</div>
</div>
<div class="section" id="case-files">
<h2>Case files<a class="headerlink" href="#case-files" title="Permalink to this headline">¶</a></h2>
<div class="topic">
<p class="topic-title">SIZE</p>
<p>Contains some hardwired runtime parameters to dimension static arrays.</p>
</div>
<div class="topic">
<p class="topic-title">foo.par</p>
<p>Contains runtime parameters.</p>
</div>
<div class="topic">
<p class="topic-title">foo.re2</p>
<p>Contains mesh and boundary data.</p>
</div>
<div class="topic">
<p class="topic-title">foo.ma2</p>
<p>Contains partioning data.</p>
</div>
<div class="topic">
<p class="topic-title">foo.usr</p>
<p>Contains user specific code to initialize solver, set source terms and boundary conditions or to manipulate solver internals.</p>
</div>
<div class="topic">
<p class="topic-title">foo.his</p>
<p>Contains probing points.</p>
</div>
<div class="topic">
<p class="topic-title">foo.f00000</p>
<p>Contains checkpoint data.</p>
</div>
<div class="topic">
<p class="topic-title">foo.nek5000</p>
<p>Contains metadata for VisIt or ParaView.</p>
</div>
<div class="topic">
<p class="topic-title">foo.rea (legacy)</p>
<p>Contains runtime parameters and mesh in ASCII. Replaced by .par and .re2 file.</p>
</div>
<div class="topic">
<p class="topic-title">foo.map (legacy)</p>
<p>Contains partioning data in ASCII.</p>
</div>
<p>Note: The old legacy files (.rea &amp; .map) are recommended for debugging purposes only.</p>
</div>
<div class="section" id="scripts">
<h2>Scripts<a class="headerlink" href="#scripts" title="Permalink to this headline">¶</a></h2>
<p>Let’s walk through some useful batch scripts:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">makenek</span> <span class="pre">&lt;case&gt;</span></code> compiles your case</li>
<li><code class="docutils literal notranslate"><span class="pre">nek/nekb</span> <span class="pre">&lt;case&gt;</span></code> runs a serial job in foreground or background</li>
<li><code class="docutils literal notranslate"><span class="pre">nekmpi/nekbmpi</span> <span class="pre">&lt;case&gt;</span> <span class="pre">&lt;number</span> <span class="pre">of</span> <span class="pre">ranks&gt;</span></code> runs a parallel job</li>
<li><code class="docutils literal notranslate"><span class="pre">neknek</span> <span class="pre">&lt;case1&gt;</span> <span class="pre">&lt;cas2&gt;</span> <span class="pre">&lt;ranks</span> <span class="pre">1&gt;</span> <span class="pre">&lt;ranks</span> <span class="pre">2&gt;</span></code> runs Nek5000 with two overlapping component grids</li>
<li><code class="docutils literal notranslate"><span class="pre">visnek</span> <span class="pre">&lt;case&gt;</span></code> creates metadata file required by <a class="reference external" href="https://wci.llnl.gov/simulation/computer-codes/visit/">VisIt</a> and <a class="reference external" href="https://www.paraview.org/">ParaView</a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">mvn</span> <span class="pre">&lt;old</span> <span class="pre">name&gt;</span> <span class="pre">&lt;new</span> <span class="pre">name&gt;</span></code> renames all case files</li>
<li><code class="docutils literal notranslate"><span class="pre">cpn</span> <span class="pre">&lt;old</span> <span class="pre">name&gt;</span> <span class="pre">&lt;new</span> <span class="pre">name&gt;</span></code> copies all case files</li>
</ul>
</div>
<div class="section" id="running-your-very-first-simulation">
<h2>Running your very first simulation<a class="headerlink" href="#running-your-very-first-simulation" title="Permalink to this headline">¶</a></h2>
<p>Hold your horses, this needs less than 5 min.
Begin by downloading the latest release tarball from <a class="reference external" href="https://github.com/Nek5000/Nek5000/releases">here</a>.
Then follow the instructions below</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd ~
tar -xvzf Nek5000_X.Y.tar.gz
export PATH=$HOME/Nek5000/bin:$PATH
cd ~/Nek5000/tools
./maketools genmap
cd ~/Nek5000/run
cp -r ../examples/eddy_uv .
cd eddy_uv
genmap                       # run partioner, on input type eddy_uv
makenek eddy_uv              # build case, edit script to change settings
nekbmpi eddy_uv 2            # run Nek5000 on 2 ranks in the background
tail logfile                 # view solver output
visnek eddy_uv               # produces the eddy_uv.nek5000 file
</pre></div>
</div>
<p>As the case runs, it will generate multiple <code class="docutils literal notranslate"><span class="pre">eddy_uv0.fXXXXX</span></code> files.
These are the restart checkpoint and visualization data files.
The metadata file, <code class="docutils literal notranslate"><span class="pre">eddy_uv.nek5000</span></code>, can be opened with either VisIt or ParaView, which will look for the data files in the same directory as the <code class="docutils literal notranslate"><span class="pre">eddy_uv.nek5000</span></code> file.</p>
<p>Note that this will not work if you clone the master branch from GitHub, as the <code class="docutils literal notranslate"><span class="pre">examples</span></code> folder is NOT included.
To obtain the examples using git, clone the <code class="docutils literal notranslate"><span class="pre">Nek5000/NekExamples.git</span></code> repository.</p>
</div>
<div class="section" id="meshing">
<span id="qstart-meshing"></span><h2>Meshing<a class="headerlink" href="#meshing" title="Permalink to this headline">¶</a></h2>
<p>Nek5000 is mainly a solver.
However, simple box type meshes can be generated with the <code class="docutils literal notranslate"><span class="pre">genbox</span></code> tool.
For more complex meshes please consider using <em>preNek</em> and the meshing tools <code class="docutils literal notranslate"><span class="pre">nekmerge</span></code> and <code class="docutils literal notranslate"><span class="pre">n2to3</span></code>.
We provide mesh converters like <code class="docutils literal notranslate"><span class="pre">exo2nek</span></code> and <code class="docutils literal notranslate"><span class="pre">msh2nek</span></code> which are quite handy if you want to use your favorite mesh generator.</p>
</div>
<div class="section" id="visualization">
<span id="qstart-vis"></span><h2>Visualization<a class="headerlink" href="#visualization" title="Permalink to this headline">¶</a></h2>
<p>Nek5000 output (<code class="docutils literal notranslate"><span class="pre">.fld</span></code> or <code class="docutils literal notranslate"><span class="pre">0.f%05d</span></code>) files can be read by <a class="reference external" href="https://wci.llnl.gov/simulation/computer-codes/visit/">VisIt</a> or <a class="reference external" href="https://www.paraview.org/">ParaView</a>.
This requires using <code class="docutils literal notranslate"><span class="pre">visnek</span></code> to generate a metadata file.
There is also an built-in X-Window based postprocessor called <code class="docutils literal notranslate"><span class="pre">POSTNEK</span></code> located in tools.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="faq.html" class="btn btn-neutral float-right" title="FAQ" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Nek5000" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2015-2022, UCHICAGO ARGONNE, LLC.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>