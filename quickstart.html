<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quickstart &mdash; Nek5000  documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="FAQ" href="faq.html" />
    <link rel="prev" title="Nek5000" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Nek5000
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#before-you-begin">Before You Begin…</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-your-very-first-simulation">Running your very first simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#directory-structure">Directory structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-your-path">Setting up your PATH</a></li>
<li class="toctree-l2"><a class="reference internal" href="#case-files">Case files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scripts">Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#meshing">Meshing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualization">Visualization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="problem_setup.html">Problem Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Nek Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Build Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendices</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Nek5000</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Quickstart</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="quickstart">
<span id="qstart"></span><h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<div class="section" id="before-you-begin">
<span id="qstart-before"></span><h2>Before You Begin…<a class="headerlink" href="#before-you-begin" title="Permalink to this headline">¶</a></h2>
<p>It is recommended that the user have basic familiarity with Linux or another Unix-based OS.
The instructions provided in the quickstart guide and the tutorials use basic bash commands and assume the user has this knowledge.
At an absolute minimum, to successfully build and run <em>Nek5000</em> will require compatible C and Fortran compilers, such as <code class="docutils literal notranslate"><span class="pre">gcc</span></code> and <code class="docutils literal notranslate"><span class="pre">gfortran</span></code>, and <em>GNU Make</em>.
To successfully build and run <em>Nek5000</em> in parallel will additionally require a compatible MPI wrapper, such as <em>OpenMPI</em> or <em>MPICH</em>.
Some of the tools and advanced features will have additional dependencies, such as <em>CMake</em>.</p>
<p>On Ubuntu, the following packages will provide the necessary compilers and wrappers to run <em>Nek5000</em> in parallel.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo apt-get update
<span class="gp">$</span> sudo apt install build-essential  <span class="c1">#provides gcc</span>
<span class="gp">$</span> sudo apt install gfortran         <span class="c1">#provides gfortran</span>
<span class="gp">$</span> sudo apt install libopenmpi-dev   <span class="c1">#provides openmpi</span>
</pre></div>
</div>
<p>Additionally, to install all of the NekTools, the following packages are necessary</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo apt install cmake            <span class="c1">#provides cmake</span>
<span class="gp">$</span> sudo apt install libx11-dev       <span class="c1">#provides X11</span>
<span class="gp">$</span> sudo apt install libxt-dev        <span class="c1">#provides X11</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These package lists also work for Ubuntu on the Windows Subsystem for Linux</p>
</div>
</div>
<div class="section" id="running-your-very-first-simulation">
<h2>Running your very first simulation<a class="headerlink" href="#running-your-very-first-simulation" title="Permalink to this headline">¶</a></h2>
<p>Hold your horses, this needs less than 5 min.
Begin by downloading the latest release tarball from <a class="reference external" href="https://github.com/Nek5000/Nek5000/releases">here</a>.
Then follow the instructions below</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> ~
<span class="gp">$</span> tar -xvzf Nek5000_X.Y.tar.gz
<span class="gp">$</span> <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$HOME</span>/Nek5000/bin:<span class="nv">$PATH</span>
<span class="gp">$</span> <span class="nb">cd</span> ~/Nek5000/tools
<span class="gp">$</span> ./maketools genmap
<span class="gp">$</span> <span class="nb">cd</span> ~/Nek5000/run
<span class="gp">$</span> cp -r ../examples/eddy_uv .
<span class="gp">$</span> <span class="nb">cd</span> eddy_uv
<span class="gp">$</span> genmap                       <span class="c1"># run partioner, on input type eddy_uv</span>
<span class="gp">$</span> makenek eddy_uv              <span class="c1"># build case, edit script to change settings</span>
<span class="gp">$</span> nekbmpi eddy_uv <span class="m">2</span>            <span class="c1"># run Nek5000 on 2 ranks in the background</span>
<span class="gp">$</span> tail logfile                 <span class="c1"># prints the last few lines of the solver output to the terminal</span>
<span class="gp">$</span> visnek eddy_uv               <span class="c1"># produces the eddy_uv.nek5000 file</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">eddy_uv</span></code> case will not be available if you cloned the master branch from GitHub, as the <code class="docutils literal notranslate"><span class="pre">examples</span></code> folder is NOT included.
To obtain the examples using git, clone the <code class="docutils literal notranslate"><span class="pre">Nek5000/NekExamples.git</span></code> repository.</p>
</div>
<p>As the case runs, it will generate multiple <code class="docutils literal notranslate"><span class="pre">eddy_uv0.fXXXXX</span></code> files.
These are the restart checkpoint and visualization data files.
The metadata file, <code class="docutils literal notranslate"><span class="pre">eddy_uv.nek5000</span></code>, can be opened with either VisIt or ParaView, which will look for the data files in the same directory as the <code class="docutils literal notranslate"><span class="pre">eddy_uv.nek5000</span></code> file.</p>
<p>Assuming all went well, congratulations! You have now run your first simulation with <em>Nek5000</em>.</p>
</div>
<div class="section" id="directory-structure">
<h2>Directory structure<a class="headerlink" href="#directory-structure" title="Permalink to this headline">¶</a></h2>
<p>Here’s a brief description of each top-level directory:</p>
<div class="topic">
<p class="topic-title">/core</p>
<p>Contains the Nek5000 application sources.</p>
</div>
<div class="topic">
<p class="topic-title">/bin</p>
<p>Contains scripts for running nek5000 and manipulating its output, and binaries for the tools. This directory should be added to your environment PATH (see <a class="reference internal" href="#sec-path"><span class="std std-ref">below</span></a>).</p>
</div>
<div class="topic">
<p class="topic-title">/tools</p>
<p>Contains the sources for the pre- and post-processing tools which are stand-alone.</p>
</div>
<div class="topic">
<p class="topic-title">/short-tests</p>
<p>Contains light-weight regression tests for verification.</p>
</div>
<div class="topic">
<p class="topic-title">/run</p>
<p>A place for users to keep their problem cases. Note that many HPC systems recommend keeping source code and output on separate file systems, in which case this directory should not be used. Consult your system administrator for best practices.</p>
</div>
<div class="topic">
<p class="topic-title">/examples</p>
<p>Contains example problems. Note that this directory is NOT included in the master branch on the GitHub repo. The <em>NekExamples</em> repository can be found <a class="reference external" href="https://github.com/Nek5000/NekExamples">here</a>.</p>
</div>
<div class="topic">
<p class="topic-title">/3rd_party</p>
<p>Contains third party software not part of the <em>Nek5000</em> core, e.g. <em>gslib</em>, <em>HYPRE</em>, and <em>CVODE</em>.</p>
</div>
</div>
<div class="section" id="setting-up-your-path">
<span id="sec-path"></span><h2>Setting up your PATH<a class="headerlink" href="#setting-up-your-path" title="Permalink to this headline">¶</a></h2>
<p>We recommend adding the <code class="docutils literal notranslate"><span class="pre">bin</span></code> directory to your shell’s execution PATH.
In the <code class="docutils literal notranslate"><span class="pre">bash</span></code> shell, this can be done temporarily (only for your active session) with the command</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">export</span> <span class="nv">PATH</span><span class="o">+=</span>:<span class="nv">$HOME</span>/Nek5000/bin
</pre></div>
</div>
<p>To do this more permanently, this line can be added to your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file in your <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> directory.
This will require you to restart your current session, i.e. log out and log back in, to become active.
You can check your current execution PATH with</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="nv">$PATH</span>
</pre></div>
</div>
<p>This will print a colon-separated list of the directories searched by Linux for the commands typed into the command line to the terminal.
If you used the above command, the <code class="docutils literal notranslate"><span class="pre">Nek5000/bin</span></code> entry should be the last value in this list.
Other common setups may add it as the first entry in this list.
Your particular setup depends on your environment.
For more information on the execution PATH in Linux, see <a class="reference external" href="https://opensource.com/article/17/6/set-path-linux">here</a> (warning: links to a 3rd party website).</p>
</div>
<div class="section" id="case-files">
<h2>Case files<a class="headerlink" href="#case-files" title="Permalink to this headline">¶</a></h2>
<div class="topic">
<p class="topic-title">SIZE</p>
<p>Contains some hardwired runtime parameters to dimension static arrays.</p>
</div>
<div class="topic">
<p class="topic-title">foo.par</p>
<p>Contains runtime parameters.</p>
</div>
<div class="topic">
<p class="topic-title">foo.re2</p>
<p>Contains mesh and boundary data.</p>
</div>
<div class="topic">
<p class="topic-title">foo.ma2</p>
<p>Contains partioning data.</p>
</div>
<div class="topic">
<p class="topic-title">foo.usr</p>
<p>Contains user specific code to initialize solver, set source terms and boundary conditions or to manipulate solver internals.
For more information see the <a class="reference internal" href="problem_setup/usr_file.html#case-files-usr"><span class="std std-ref">User Routines File (.usr)</span></a>.</p>
</div>
<div class="topic">
<p class="topic-title">foo.his</p>
<p>Contains probing points.
For more information see <a class="reference internal" href="problem_setup/features.html#features-his"><span class="std std-ref">History Points</span></a>.</p>
</div>
<div class="topic">
<p class="topic-title">foo.f00000</p>
<p>Contains checkpoint data.</p>
</div>
<div class="topic">
<p class="topic-title">foo.nek5000</p>
<p>Contains metadata for VisIt or ParaView.</p>
</div>
<div class="topic">
<p class="topic-title">foo.rea (legacy)</p>
<p>Contains runtime parameters and mesh in ASCII. Replaced by .par and .re2 file.</p>
</div>
<div class="topic">
<p class="topic-title">foo.map (legacy)</p>
<p>Contains partioning data in ASCII.</p>
</div>
<p>Note: The old legacy files (.rea &amp; .map) are recommended for debugging purposes only.</p>
</div>
<div class="section" id="scripts">
<h2>Scripts<a class="headerlink" href="#scripts" title="Permalink to this headline">¶</a></h2>
<p>Let’s walk through some useful batch scripts:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">makenek</span> <span class="pre">&lt;case&gt;</span></code> compiles your case</li>
<li><code class="docutils literal notranslate"><span class="pre">nek/nekb</span> <span class="pre">&lt;case&gt;</span></code> runs a serial job in foreground or background</li>
<li><code class="docutils literal notranslate"><span class="pre">nekmpi/nekbmpi</span> <span class="pre">&lt;case&gt;</span> <span class="pre">&lt;number</span> <span class="pre">of</span> <span class="pre">ranks&gt;</span></code> runs a parallel job</li>
<li><code class="docutils literal notranslate"><span class="pre">neknek</span> <span class="pre">&lt;case1&gt;</span> <span class="pre">&lt;cas2&gt;</span> <span class="pre">&lt;ranks</span> <span class="pre">1&gt;</span> <span class="pre">&lt;ranks</span> <span class="pre">2&gt;</span></code> runs Nek5000 with two overlapping component grids</li>
<li><code class="docutils literal notranslate"><span class="pre">visnek</span> <span class="pre">&lt;case&gt;</span></code> creates metadata file required by <a class="reference external" href="https://wci.llnl.gov/simulation/computer-codes/visit/">VisIt</a> and <a class="reference external" href="https://www.paraview.org/">ParaView</a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">mvn</span> <span class="pre">&lt;old</span> <span class="pre">name&gt;</span> <span class="pre">&lt;new</span> <span class="pre">name&gt;</span></code> renames all case files</li>
<li><code class="docutils literal notranslate"><span class="pre">cpn</span> <span class="pre">&lt;old</span> <span class="pre">name&gt;</span> <span class="pre">&lt;new</span> <span class="pre">name&gt;</span></code> copies all case files</li>
</ul>
</div>
<div class="section" id="meshing">
<span id="qstart-meshing"></span><h2>Meshing<a class="headerlink" href="#meshing" title="Permalink to this headline">¶</a></h2>
<p><em>Nek5000</em> is mainly a solver.
However, simple box type meshes can be generated with the <code class="docutils literal notranslate"><span class="pre">genbox</span></code> tool.
For more complex meshes please consider using <em>preNek</em> and the meshing tools <code class="docutils literal notranslate"><span class="pre">nekmerge</span></code> and <code class="docutils literal notranslate"><span class="pre">n2to3</span></code>.
We provide mesh converters like <code class="docutils literal notranslate"><span class="pre">exo2nek</span></code> and <code class="docutils literal notranslate"><span class="pre">gmsh2nek</span></code> which are quite handy if you want to use your favorite mesh generator.</p>
</div>
<div class="section" id="visualization">
<span id="qstart-vis"></span><h2>Visualization<a class="headerlink" href="#visualization" title="Permalink to this headline">¶</a></h2>
<p><em>Nek5000</em> output (<code class="docutils literal notranslate"><span class="pre">.fld</span></code> or <code class="docutils literal notranslate"><span class="pre">0.f%05d</span></code>) files can be read by <a class="reference external" href="https://wci.llnl.gov/simulation/computer-codes/visit/">VisIt</a> or <a class="reference external" href="https://www.paraview.org/">ParaView</a>.
This requires using <code class="docutils literal notranslate"><span class="pre">visnek</span></code> to generate a metadata file.
There is also an built-in X-Window based postprocessor called <code class="docutils literal notranslate"><span class="pre">postnek</span></code> located in tools.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Nek5000" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="faq.html" class="btn btn-neutral float-right" title="FAQ" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2023, UCHICAGO ARGONNE, LLC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>